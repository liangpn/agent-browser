# Agent 工作准则（本仓库）

本文件约束 AI coding agent 在本仓库中的工作方式，目标是：**可复现、可审计、可协作**。

## 1) 每次对你汇报的固定格式

每次任务阶段性完成或结束时，我必须在回复中清晰列出：

- **已完成**：本次实际完成了什么（按要点列出）
- **未完成**：剩余什么、为什么没做（阻塞点/依赖）
- **需要你协助**：你需要执行的命令/提供的文件/确认的决策（写成可直接操作的步骤）
- **遇到的问题**：报错/限制/风险点（附关键日志位置）
- **证据**：我实际跑过的命令与结果（或日志文件路径），严禁“模拟通过/假装测试”

## 2) 命令行/权限与执行纪律

- **只使用我已拥有的权限范围做事**：当前环境允许在仓库内读写；对仓库外写入往往会被 sandbox 拦截。
- **避免“大而全的一条命令”**：尽量拆成可观测的小步骤（便于定位失败点，也便于被权限规则准确捕获）。
- **尽量避免隐式写入受限目录**：例如 Docker Desktop 默认写 `~/.docker/` 可能触发权限问题；需要时使用可写目录（例如 `DOCKER_CONFIG_DIR=/tmp/docker-config`）并在文档里明确写法。
- **长耗时/容易卡住的步骤可交给你执行**：我先把脚本/命令清单准备好，你执行并把日志回传到 `work/validation/`。

## 3) 工作细节与证据的落盘位置（work/ 为单一事实来源）

- `work/requirements.md`：需求冻结版（变更必须更新）
- `work/backlog.md`：任务清单与状态
- `work/validation/`：真实运行记录/客户端调用记录/截图（证据）

目录说明见：`work/README.md`

**规则：**每次任务完成后，我必须把关键“工作细节与证据”补充到 `work/` 下（通常是更新 backlog + 添加 validation 记录）。

## 4) 我建议补充的准则（基于你之前的痛点）

- **不允许伪造结果**：所有“通过/完成/可用”必须能对应到实际命令输出或真实日志文件。
- **默认先写验收证据路径**：优先把可复现的脚本、调用样例、日志落盘；再在聊天里做摘要。
- **版本/时间写清楚**：涉及 “latest / 今天 / 昨天” 等相对概念时，必须写明确日期与（如有）digest/版本号。

